name: ERPNext Product Requirements Document  
description: Template for creating comprehensive ERPNext PRDs with DocType specifications, integration requirements, and technical constraints
template:
  id: erpnext-prd-template-v1
  name: ERPNext Product Requirements Document
  version: 1.0
  output:
    format: markdown
    filename: docs/erpnext-prd.md
    title: "{{project_name}} ERPNext Product Requirements Document (PRD)"

workflow:
  mode: interactive
  elicitation: erpnext-requirements-elicitation
  framework: frappe

sections:
  - id: goals-context
    title: Goals and Background Context
    instruction: |
      Define ERPNext-specific goals and context. Consider ERPNext's existing capabilities,
      Frappe Framework constraints, and integration with existing apps (docflow, n8n_integration).
      Focus on how this enhancement fits within the ERPNext ecosystem.
    sections:
      - id: goals
        title: Goals
        type: bullet-list
        instruction: |
          ERPNext-specific desired outcomes:
          - Business process improvements within ERPNext
          - User experience enhancements leveraging Frappe UI
          - Integration benefits with existing apps
          - Mobile-first and accessibility improvements
          - Automation and workflow optimizations
      
      - id: background
        title: Background Context
        type: paragraphs
        instruction: |
          ERPNext context including:
          - Current ERPNext environment and capabilities
          - Existing app integrations (docflow, n8n_integration)
          - Business process gaps this addresses
          - Frappe Framework opportunities to leverage
          - Mobile and modern web requirements
      
      - id: erpnext-environment
        title: ERPNext Environment
        instruction: |
          Current ERPNext environment specifications:
          - Frappe version and ERPNext version
          - Installed apps and their versions
          - Custom DocTypes and modifications
          - Integration patterns in use
          - Performance and scale considerations
        template: |
          **Bench Environment:** {{bench_path}}
          **Site:** {{site_name}}
          **Frappe Version:** {{frappe_version}}
          **ERPNext Version:** {{erpnext_version}}
          **Installed Apps:** {{installed_apps}}
          **Custom Apps:** {{custom_apps}}
      
      - id: changelog
        title: Change Log
        type: table
        columns: [Date, Version, Description, Author]
        instruction: Track document versions and changes

  - id: requirements
    title: Requirements
    instruction: |
      ERPNext-specific functional and non-functional requirements.
      Consider Frappe Framework capabilities and constraints.
    elicit: true
    sections:
      - id: functional
        title: Functional Requirements
        type: numbered-list
        prefix: FR
        instruction: |
          ERPNext functional requirements with specific consideration for:
          - DocType creation, modification, and relationships
          - Business logic and workflow requirements
          - User interface and experience requirements
          - Integration requirements with existing apps
          - Mobile and responsive design requirements
          - API and automation requirements
        examples:
          - "FR1: Create new DocType 'Project Milestone' with fields for milestone name, target date, completion percentage, and link to Project DocType."
          - "FR2: Implement mobile-first responsive design for all Project Milestone views using Frappe UI components."
          - "FR3: Integrate Project Milestone creation with existing docflow approval workflows."
      
      - id: non-functional
        title: Non-Functional Requirements
        type: numbered-list
        prefix: NFR
        instruction: |
          ERPNext non-functional requirements including:
          - Performance requirements for expected data volumes
          - Security requirements following ERPNext standards
          - Frappe Framework compliance requirements
          - Mobile performance and PWA requirements
          - Integration performance with existing apps
          - Scalability and multi-tenancy requirements
        examples:
          - "NFR1: All DocType operations must complete within 500ms for datasets up to 10,000 records."
          - "NFR2: All API endpoints must be properly whitelisted and follow Frappe security patterns."
          - "NFR3: Mobile interface must achieve 90+ Lighthouse performance score."

  - id: doctype-specifications
    title: DocType Specifications
    instruction: |
      Detailed specifications for DocTypes involved in this enhancement.
      Include field definitions, relationships, and business rules.
    elicit: true
    sections:
      - id: new-doctypes
        title: New DocTypes
        instruction: |
          Specifications for new DocTypes to be created:
          - DocType name and module assignment
          - Field definitions with types and constraints
          - Relationship specifications (Link, Table)
          - Permission matrix and role assignments
          - Naming conventions and auto-naming rules
        template: |
          **DocType Name:** {{doctype_name}}
          **Module:** {{module_name}}
          **Fields:**
          - {{field_name}} ({{field_type}}): {{description}}
          **Relationships:**
          - {{link_field}} → {{target_doctype}}
          **Permissions:**
          - {{role}}: {{permissions}}
      
      - id: modified-doctypes
        title: Modified DocTypes
        instruction: |
          Specifications for existing DocTypes to be modified:
          - DocType name and current structure
          - Fields to be added, modified, or removed
          - New relationships or relationship changes
          - Permission changes required
          - Migration requirements and backward compatibility
        template: |
          **DocType Name:** {{existing_doctype_name}}
          **Modifications:**
          - Add field: {{new_field}} ({{field_type}})
          - Modify field: {{existing_field}} → {{changes}}
          - New relationship: {{link_field}} → {{target_doctype}}
          **Migration:** {{migration_notes}}

  - id: integration-requirements
    title: Integration Requirements
    instruction: |
      Specifications for integration with existing apps and external systems.
    elicit: true
    sections:
      - id: docflow-integration
        title: docflow Integration
        instruction: |
          Requirements for docflow workflow integration:
          - Workflow states and transitions
          - Approval processes and role assignments
          - Document lifecycle management
          - State change hooks and validations
        template: |
          **Workflow Name:** {{workflow_name}}
          **States:** {{workflow_states}}
          **Transitions:** {{transition_rules}}
          **Approvers:** {{approval_roles}}
      
      - id: n8n-integration
        title: n8n_integration Requirements
        instruction: |
          Requirements for n8n_integration automation:
          - Webhook trigger points
          - External system synchronization
          - Event-driven processes
          - Error handling and retry logic
        template: |
          **Automation Triggers:** {{trigger_events}}
          **External Systems:** {{external_systems}}
          **Data Synchronization:** {{sync_requirements}}
          **Error Handling:** {{error_procedures}}
      
      - id: api-requirements
        title: API Requirements
        instruction: |
          Requirements for API endpoints and external integrations:
          - REST API endpoints to be created
          - Authentication and authorization requirements
          - Rate limiting and security measures
          - Data validation and sanitization
        template: |
          **Endpoint:** {{api_endpoint}}
          **Method:** {{http_method}}
          **Authentication:** {{auth_method}}
          **Parameters:** {{api_parameters}}
          **Response Format:** {{response_structure}}

  - id: user-experience
    title: User Experience Requirements
    instruction: |
      Requirements for user interface and experience design.
    elicit: true
    sections:
      - id: desktop-interface
        title: Desktop Interface
        instruction: |
          Desktop interface requirements using Frappe UI:
          - List view specifications and customizations
          - Form view layout and field organization
          - Dashboard and report requirements
          - Navigation and workflow integration
        template: |
          **View Type:** {{view_type}}
          **Layout:** {{layout_description}}
          **Fields Displayed:** {{visible_fields}}
          **Actions Available:** {{user_actions}}
      
      - id: mobile-interface
        title: Mobile Interface
        instruction: |
          Mobile-first interface requirements:
          - Responsive design breakpoints
          - Touch-optimized interactions
          - Offline functionality requirements
          - PWA features if applicable
        template: |
          **Breakpoints:** {{responsive_breakpoints}}
          **Touch Interactions:** {{touch_requirements}}
          **Offline Features:** {{offline_capabilities}}
          **PWA Requirements:** {{pwa_features}}
      
      - id: accessibility
        title: Accessibility Requirements
        instruction: |
          Accessibility requirements following WCAG guidelines:
          - Screen reader compatibility
          - Keyboard navigation support
          - Color contrast and visual requirements
          - Alternative text and descriptions
        template: |
          **WCAG Level:** {{wcag_compliance_level}}
          **Screen Reader:** {{screen_reader_support}}
          **Keyboard Navigation:** {{keyboard_requirements}}
          **Visual Requirements:** {{visual_accessibility}}

  - id: technical-constraints
    title: Technical Constraints
    instruction: |
      Technical constraints and framework requirements.
    sections:
      - id: frappe-constraints
        title: Frappe Framework Constraints
        instruction: |
          Frappe Framework specific constraints and requirements:
          - Frappe-first principle adherence
          - Framework version compatibility
          - Built-in capability usage requirements
          - Anti-pattern avoidance
        template: |
          **Framework Version:** {{frappe_version_requirement}}
          **Built-in Capabilities:** {{frappe_capabilities_to_use}}
          **Avoided Patterns:** {{anti_patterns_to_avoid}}
          **Compliance Requirements:** {{framework_compliance}}
      
      - id: performance-constraints
        title: Performance Constraints
        instruction: |
          Performance requirements and constraints:
          - Database query optimization requirements
          - Page load time targets
          - API response time limits
          - Memory usage constraints
        template: |
          **Page Load Time:** {{page_load_target}}
          **API Response Time:** {{api_response_target}}
          **Database Queries:** {{query_optimization_requirements}}
          **Memory Usage:** {{memory_constraints}}
      
      - id: security-constraints
        title: Security Constraints
        instruction: |
          Security requirements and constraints:
          - ERPNext security standard compliance
          - Data privacy and protection requirements
          - Authentication and authorization patterns
          - Input validation and sanitization
        template: |
          **Security Standards:** {{security_compliance}}
          **Data Protection:** {{data_privacy_requirements}}
          **Authentication:** {{auth_requirements}}
          **Input Validation:** {{validation_requirements}}

  - id: success-criteria
    title: Success Criteria
    instruction: |
      Measurable criteria for determining project success.
    sections:
      - id: functional-success
        title: Functional Success Criteria
        type: numbered-list
        instruction: |
          Measurable functional success criteria:
          - User workflow completion rates
          - Feature adoption metrics
          - Business process improvement measures
          - Integration success rates
      
      - id: technical-success
        title: Technical Success Criteria
        type: numbered-list
        instruction: |
          Measurable technical success criteria:
          - Performance benchmark achievements
          - Security compliance validation
          - Framework compliance scores
          - Mobile usability metrics
      
      - id: user-success
        title: User Success Criteria
        type: numbered-list
        instruction: |
          Measurable user success criteria:
          - User satisfaction scores
          - Task completion time improvements
          - Error rate reductions
          - Accessibility compliance validation